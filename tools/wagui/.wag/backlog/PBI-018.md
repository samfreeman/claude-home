# PBI-018: Quick Links Panel (Sidebar Section)

## User Story
As a developer, I want a links section in the sidebar where I can store bookmarks to relevant resources (GitHub repo, docs, deployed app) so that I can quickly access them without leaving wagui.

## Problem
While working on an app, developers frequently need to reference:
- GitHub repository
- Documentation (Tailwind, shadcn, SQLite, etc.)
- Deployed application URL
- CI/CD dashboard
- Design files

Currently they must manually navigate to these in another tab.

## Acceptance Criteria
- [ ] "Links" section in the left sidebar
- [ ] Section is expandable/collapsible (uses SidebarSection from PBI-016)
- [ ] Links are scoped per-app (each app has its own links)
- [ ] Links persist to SQLite across sessions
- [ ] Each link has: name + URL
- [ ] Can add new links (name and URL inputs)
- [ ] Can edit existing links
- [ ] Can delete links
- [ ] Clicking a link opens in new browser tab
- [ ] Works in both expanded and collapsed sidebar states
- [ ] Tests written for new code

## Technical Notes

### Database Schema
```sql
CREATE TABLE links (
    id TEXT PRIMARY KEY,
    app TEXT NOT NULL,
    name TEXT NOT NULL,
    url TEXT NOT NULL,
    sort_order INTEGER DEFAULT 0,
    created_at INTEGER NOT NULL,
    updated_at INTEGER NOT NULL
);

CREATE INDEX idx_links_app ON links(app);
```

### Server Actions
```typescript
'use server'

import { db } from './db'

export async function createLink(app: string, name: string, url: string): Promise<Link> {
    const id = crypto.randomUUID()
    const now = Date.now()
    const maxOrder = db.get('SELECT MAX(sort_order) as max FROM links WHERE app = ?', [app])?.max ?? -1
    db.run(
        'INSERT INTO links (id, app, name, url, sort_order, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)',
        [id, app, name, url, maxOrder + 1, now, now]
    )
    return { id, app, name, url, sortOrder: maxOrder + 1, createdAt: now, updatedAt: now }
}

export async function updateLink(id: string, updates: { name?: string, url?: string }): Promise<void> {
    const sets: string[] = ['updated_at = ?']
    const values: any[] = [Date.now()]

    if (updates.name !== undefined) {
        sets.push('name = ?')
        values.push(updates.name)
    }
    if (updates.url !== undefined) {
        sets.push('url = ?')
        values.push(updates.url)
    }

    values.push(id)
    db.run(`UPDATE links SET ${sets.join(', ')} WHERE id = ?`, values)
}

export async function deleteLink(id: string): Promise<void> {
    db.run('DELETE FROM links WHERE id = ?', [id])
}

export async function fetchLinks(app: string): Promise<Link[]> {
    return db.all('SELECT * FROM links WHERE app = ? ORDER BY sort_order', [app])
}
```

### Component Structure
```
src/components/Sidebar/
â”œâ”€â”€ LinksSection.tsx      # The sidebar section wrapper
â”œâ”€â”€ LinkList.tsx          # List of links
â”œâ”€â”€ LinkItem.tsx          # Individual link (icon, name, edit, delete)
â””â”€â”€ LinkForm.tsx          # Form for add/edit link
```

### UI in Sidebar

**Expanded:**
```
â”‚ â–¼ Links              â”‚
â”‚   ğŸ”— GitHub Repo     â”‚
â”‚   ğŸ”— Tailwind Docs   â”‚
â”‚   ğŸ”— shadcn/ui       â”‚
â”‚   [+ Add link...]    â”‚
```

**Collapsed (icon only):**
```
â”‚ ğŸ”— â”‚  â† Click opens popover showing links list
```

### Add/Edit Form
When clicking "Add link" or edit button:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Name: [GitHub Repo    ] â”‚
â”‚ URL:  [https://github...â”‚
â”‚ [Cancel]  [Save]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Could be inline in sidebar or a small popover/modal.

### Interactions
- **Click link:** Opens URL in new tab (`target="_blank"`)
- **Add link:** Click "+ Add link" â†’ shows form
- **Edit link:** Hover reveals edit icon â†’ click â†’ shows form with existing values
- **Delete link:** Hover reveals `Ã—` button
- **Collapsed mode:** Click ğŸ”— icon shows popover with links list

### Favicon/Icon Ideas (Future)
- Could fetch favicon from URL domain
- Or use generic link icon for all
- Or let user pick an emoji

## UI Requirements

### Visual Design
- Link icon (ğŸ”— or favicon) aligned left
- Link name truncates if too long
- Hover shows full URL as tooltip
- Edit/delete buttons appear on hover

### Keyboard
- `Enter` in form â†’ save
- `Escape` in form â†’ cancel

## Priority
P2 - Quality of life improvement

## Dependencies
- PBI-016 (Collapsible Left Sidebar Shell) - provides the section structure
- PBI-001 (SQLite Persistence) - storage infrastructure

## Estimate
Small - straightforward CRUD, similar pattern to Notes