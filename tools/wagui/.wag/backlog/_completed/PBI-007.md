# PBI-007: Broadcast Clear Event to wagui

## User Story
As a developer, I want wagui to clear its message display when `wag_clear()` is called so that I can start fresh without refreshing the browser.

## Problem
Currently `wag_clear()` clears the server-side message store, but wagui continues to display the old messages because:
1. wag-mcp doesn't broadcast a "clear" event to SSE clients
2. wagui doesn't listen for a "clear" event

## Acceptance Criteria
- [x] wag-mcp broadcasts "clear" event when `clear()` is called
- [x] wagui listens for "clear" event and resets message state
- [x] wagui clears displayed messages immediately when event received
- [x] State header also resets in wagui (mode, app, context should clear)
- [x] Tests written for new code

## Technical Notes

### wag-mcp (mcp-servers/wag-mcp/src/store.ts)
Add broadcast to `clear()` method:
```typescript
clear() {
    this.messages = []
    this.state = { ... }
    this.broadcast('clear', {})  // Add this
    this.persist()
}
```

### wagui (tools/wagui/src/hooks/useSSE.ts)
Add event listener for "clear":
```typescript
eventSource.addEventListener('clear', () => {
    setMessages([])
    setState(null)
})
```

## Priority
P2 - Polish/DX improvement. Users can refresh as workaround.

## Dependencies
- None

## Estimate
Small - two small code changes
