# PBI-016: Collapsible Left Sidebar Shell

## User Story
As a developer, I want a collapsible left sidebar in wagui so that I have a consistent place for navigation and tools without cluttering the main message area.

## Problem
Currently wagui is a single-page view with all controls in the header. As we add more features (app switching, notes, links), we need a dedicated space that can expand/collapse to maximize screen real estate.

## Acceptance Criteria
- [ ] Left sidebar with collapsible behavior
- [ ] Collapse button (`Â«`) shrinks to icon-only rail (~48px)
- [ ] Expand button (`Â»`) returns to full width (~240px)
- [ ] Sidebar has expandable sections with `â–¼`/`â–¶` toggles
- [ ] "Apps" section shows list of apps (derived from SSE state for now)
- [ ] Clicking an app name is a placeholder (no routing yet)
- [ ] Current app highlighted in the list
- [ ] Collapse/expand state persists to localStorage
- [ ] Section expand states persist to localStorage
- [ ] Smooth animations on collapse/expand
- [ ] Tests written for new code

## Technical Notes

### Layout Structure
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Â«] WAGUI  â”‚ Header                                  â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ â–¼ Apps     â”‚                                         â”‚
â”‚   â€¢ wagui  â”‚          Message Area                   â”‚
â”‚   â€¢ dragon â”‚                                         â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                         â”‚
â”‚ â–¶ Links    â”‚  (placeholder - PBI-018)                â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                         â”‚
â”‚ â–¶ Notes    â”‚  (placeholder - PBI-017)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Collapsed State
```
â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Â» â”‚ Header                                           â”‚
â”‚â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ğŸ“â”‚                                                  â”‚
â”‚â”€â”€â”‚              Message Area                        â”‚
â”‚ğŸ”—â”‚                                                  â”‚
â”‚â”€â”€â”‚                                                  â”‚
â”‚ğŸ“â”‚                                                  â”‚
â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Component Structure
```
src/components/
â”œâ”€â”€ Sidebar/
â”‚   â”œâ”€â”€ Sidebar.tsx           # Main sidebar container
â”‚   â”œâ”€â”€ SidebarSection.tsx    # Expandable section wrapper
â”‚   â”œâ”€â”€ AppList.tsx           # Apps section content
â”‚   â””â”€â”€ SidebarContext.tsx    # State management (collapse, sections)
```

### State Management
```typescript
interface SidebarState {
    collapsed: boolean
    sections: {
        apps: boolean      // expanded state
        links: boolean
        notes: boolean
    }
}

// Persist to localStorage
const STORAGE_KEY = 'wagui-sidebar-state'
```

### CSS/Styling
- Use CSS transitions for smooth collapse/expand
- Sidebar width: 240px expanded, 48px collapsed
- Icons visible in collapsed state, tooltips on hover
- shadcn/ui components where applicable (Collapsible, Button)

### App List Data
For now, derive apps from:
1. Current SSE state header (shows active app)
2. Could hardcode known apps initially
3. Later: query SQLite for distinct apps (PBI-001 dependency)

## UI Requirements

### Visual Design
- Background slightly different from main area (subtle contrast)
- Section headers clickable to expand/collapse
- Active app has accent color highlight
- Hover states on clickable items
- Icons: ğŸ“ Apps, ğŸ”— Links, ğŸ“ Notes

### Interactions
- Click `Â«`/`Â»` to collapse/expand entire sidebar
- Click section header to expand/collapse section
- Click app name to... (placeholder for now, future: navigate)
- Collapsed icons show tooltip on hover

### Responsive
- On very narrow screens (<768px): sidebar starts collapsed
- Could become a drawer/overlay on mobile (future)

## Priority
P1 - Foundation for sidebar-based features

## Dependencies
None - can work with current SSE state

## Estimate
Medium - new layout structure, state management, animations